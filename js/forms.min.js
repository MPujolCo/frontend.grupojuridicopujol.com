!function(e){e.fn.forms=function(a){return this.each(function(){var t=e(this),i=t.data("forms")||{errorCl:"error",emptyCl:"empty",invalidCl:"invalid",notRequiredCl:"notRequired",successCl:"success",successShow:"4000",mailHandlerURL:"bat/MailHandler.php",ownerEmail:"abogados@grupojuridicopujol.com",stripHTML:!0,smtpMailServer:"localhost",targets:"input,textarea",controls:"a[data-type=reset],a[data-type=submit]",validate:!0,rx:{".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:"input"},".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".message":{rx:/.{20}/,target:"textarea"}},preFu:function(){i.labels.each(function(){var a=e(this),t=e(i.targets,this),r=t.val(),n=function(){var e=t.is("input")?(e=a.html().match(/value=['"](.+?)['"].+/),!!e&&!!e[1]&&e[1]):t.html();return""==r?r:e}();n!=r&&t.val(r=n||r),a.data({defVal:r}),t.bind("focus",function(){t.val()==r&&(t.val(""),i.hideEmptyFu(a),a.removeClass(i.invalidCl))}).bind("blur",function(){i.validateFu(a),i.isEmpty(a)&&(t.val(r),i.hideErrorFu(a.removeClass(i.invalidCl)))}).bind("keyup",function(){a.hasClass(i.invalidCl)&&i.validateFu(a)}),a.find("."+i.errorCl+",."+i.emptyCl).css({display:"block"}).hide()}),i.success=e("."+i.successCl,i.form).hide()},isRequired:function(e){return!e.hasClass(i.notRequiredCl)},isValid:function(a){var t=!0;return e.each(i.rx,function(e,i){a.is(e)&&(t=i.rx.test(a.find(i.target).val()))}),t},isEmpty:function(e){var a;return""==(a=e.find(i.targets).val())||a==e.data("defVal")},validateFu:function(a){a.each(function(){var a=e(this),t=i.isRequired(a),r=i.isEmpty(a),n=i.isValid(a);r&&t?i.showEmptyFu(a.addClass(i.invalidCl)):i.hideEmptyFu(a.removeClass(i.invalidCl)),r||(n?i.hideErrorFu(a.removeClass(i.invalidCl)):i.showErrorFu(a.addClass(i.invalidCl)))})},getValFromLabel:function(a){var t=e("input,textarea",a).val(),i=a.data("defVal");return a.length?t==i?"nope":t:"nope"},submitFu:function(){i.validateFu(i.labels),i.form.has("."+i.invalidCl).length||e.ajax({type:"POST",url:i.mailHandlerURL,data:{name:i.getValFromLabel(e(".name",i.form)),email:i.getValFromLabel(e(".email",i.form)),phone:i.getValFromLabel(e(".phone",i.form)),fax:i.getValFromLabel(e(".fax",i.form)),state:i.getValFromLabel(e(".state",i.form)),message:i.getValFromLabel(e(".message",i.form)),owner_email:i.ownerEmail,stripHTML:i.stripHTML},success:function(){i.showFu()}})},showFu:function(){i.success.slideDown(function(){setTimeout(function(){i.success.slideUp(),i.form.trigger("reset")},i.successShow)})},controlsFu:function(){e(i.controls,i.form).each(function(){var a=e(this);a.bind("click",function(){return i.form.trigger(a.data("type")),!1})})},showErrorFu:function(e){e.find("."+i.errorCl).slideDown()},hideErrorFu:function(e){e.find("."+i.errorCl).slideUp()},showEmptyFu:function(e){e.find("."+i.emptyCl).slideDown(),i.hideErrorFu(e)},hideEmptyFu:function(e){e.find("."+i.emptyCl).slideUp()},init:function(){i.form=i.me,i.labels=e("label",i.form),i.preFu(),i.controlsFu(),i.form.bind("submit",function(){return i.validate?i.submitFu():i.form[0].submit(),!1}).bind("reset",function(){i.labels.removeClass(i.invalidCl),i.labels.each(function(){var a=e(this);i.hideErrorFu(a),i.hideEmptyFu(a)})}),i.form.trigger("reset")}};i.me||i.init(i.me=t.data({forms:i})),"object"==typeof a&&e.extend(i,a)})}}(jQuery),$(window).load(function(){$("#form").forms({ownerEmail:"abogados@grupojuridicopujol.com"})});